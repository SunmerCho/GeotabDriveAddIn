<!DOCTYPE html>
<html>
<head>
    <title>Treker Driver</title>
    <script>
        geotab.addin.driver = () => {
            const openDriver = function () {
                try {
                    window.open("treker_driver_lite://", "_system");
                } catch (e) {
                    console.error("Cannot open driver app:", e);
                }
            };

            return {
                initialize(api, state, callback) {
                    // document.getElementById("openDriver").addEventListener("click", openDriver);
              document.getElementById("openDriver").addEventListener("click", function () {
                            // state.gotoPage("devices");
                  const exist = api.mobile.exists();
                  if(api.mobile.exists()){
                      alert("exists");
                  }else {
                      alert("not exists");
                  }
                        });
                    callback();
                },

                focus(api, state) {
                    openDriver();

                    api.mobile.navigate('hos');
                },

                blur(api, state) {}
            };
        };
    </script>
</head>
<body>
    <button id="openDriver">Open Driver v1</button>
</body>
</html>

